<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="AdminMapper">

<select id="selectAllOrders" parameterType="hashmap" resultType="ProductOrderDTO">
	select * from orders o join product p using(p_id)
	<where>
	  <if test='searchName!=null and !searchName.equals("null")'>
	 	${searchName} like '%${searchValue}%'
	  </if>
	  <if test='status!=null and !status.equals("null")'> 
 	  	and order_state=#{status}
	  </if>
	</where>
	order by order_id desc
</select>

<select id="countTotalOrders" parameterType="hashmap" resultType="int">
	select count(*) from orders o join product p using(p_id)
	<where>
	  <if test='searchName!=null and !searchName.equals("null")'>
	 	${searchName} like '%${searchValue}%'
	  </if>
	  <if test='status!=null and !status.equals("null")'> 
 	  	and order_state=#{status}
	  </if>
	</where>
</select>

</mapper>